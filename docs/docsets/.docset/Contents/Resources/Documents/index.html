<!DOCTYPE html>
<html lang="en">
  <head>
    <title>  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>
    <a title="  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html"> Docs</a> (100% documented)</p>
        <div class="header-right">
          <form role="search" action="search.json">
            <input type="text" placeholder="Search documentation" data-typeahead>
          </form>
        </div>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html"> Reference</a>
        <img id="carat" src="img/carat.png" alt=""/>
          Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/BasicXMLParser.html">BasicXMLParser</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/GPXExporter.html">GPXExporter</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/GPXFileParser.html">GPXFileParser</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Global%20Variables.html">Global Variables</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Global%20Variables.html#/s:6GPXKit5wgs84Sd1a_Sd1ftvp">wgs84</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/BasicXMLParserError.html">BasicXMLParserError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ConvergenceError.html">ConvergenceError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ElevationSmoothing.html">ElevationSmoothing</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/GPXParserError.html">GPXParserError</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/Array.html">Array</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/CLLocationCoordinate2D.html">CLLocationCoordinate2D</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/Collection.html">Collection</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/RandomAccessCollection.html">RandomAccessCollection</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/%5BDistanceHeight%5D.html">[DistanceHeight]</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/%5BGradeSegment%5D.html">[GradeSegment]</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/GeoCoordinate.html">GeoCoordinate</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/HeightMappable.html">HeightMappable</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/Climb.html">Climb</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Coordinate.html">Coordinate</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/DistanceHeight.html">DistanceHeight</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/GPXTrack.html">GPXTrack</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/GPXTrack/Segment.html">– Segment</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/GeoBounds.html">GeoBounds</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/GradeSegment.html">GradeSegment</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/GradeSegment.html#/s:6GPXKit12GradeSegmentV07InvalidB5ErrorV">– InvalidGradeError</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/TrackGraph.html">TrackGraph</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/TrackPoint.html">TrackPoint</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/TrackSegment.html">TrackSegment</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Waypoint.html">Waypoint</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/XMLNode.html">XMLNode</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <h1 id='gpxkit' class='heading'>GPXKit</h1>

<p>A library for parsing and exporting GPX files with no dependencies besides Foundation.</p>

<p><a href="https://swiftpackageindex.com/mmllr/GPXKit"><img src="https://img.shields.io/endpoint?url=https%3A%2F%2Fswiftpackageindex.com%2Fapi%2Fpackages%2Fmmllr%2FGPXKit%2Fbadge%3Ftype%3Dswift-versions" alt=""></a><br>
<a href="https://swiftpackageindex.com/mmllr/GPXKit"><img src="https://img.shields.io/endpoint?url=https%3A%2F%2Fswiftpackageindex.com%2Fapi%2Fpackages%2Fmmllr%2FGPXKit%2Fbadge%3Ftype%3Dplatforms" alt=""></a>  </p>
<h2 id='features' class='heading'>Features</h2>

<ul>
<li>[x] Parsing GPX files into a track struct</li>
<li>[x] Exporting a track to a GPX xml</li>
<li>[x] Support for iOS, macOS &amp; watchOS</li>
<li>[x] Optionally removes date and time from exported GPX for keeping privacy</li>
<li>[x] Combine support</li>
<li>[x] Height Map, geo-bounds, distance, and elevation information for an imported track</li>
<li>[x] Waypoint support</li>
<li>[x] Test coverage</li>
<li>[x] Climb detection</li>
<li>[x] Grade segmentation</li>
<li>[x] Support for Garmin trackpoint extensions</li>
<li>[x] Support for multiple track segements</li>
</ul>
<h2 id='installation' class='heading'>Installation</h2>

<p>To use the <code>GPXKit</code> library in a SwiftPM project, add the following line to the dependencies in your <code>Package.swift</code> file:</p>
<pre class="highlight swift"><code><span class="o">.</span><span class="nf">package</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="s">"https://github.com/mmllr/GPXKit"</span><span class="p">,</span> <span class="nv">from</span><span class="p">:</span> <span class="s">"2.2.3"</span><span class="p">)</span>
</code></pre>
<h2 id='usage-examples' class='heading'>Usage examples</h2>
<h3 id='importing-a-track' class='heading'>Importing a track</h3>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">GPXKit</span>

<span class="k">let</span> <span class="nv">parser</span> <span class="o">=</span> <span class="kt">GPXFileParser</span><span class="p">(</span><span class="nv">xmlString</span><span class="p">:</span> <span class="n">xml</span><span class="p">)</span>
    <span class="k">switch</span> <span class="n">parser</span><span class="o">.</span><span class="nf">parse</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">case</span> <span class="o">.</span><span class="nf">success</span><span class="p">(</span><span class="k">let</span> <span class="nv">track</span><span class="p">):</span>
        <span class="nf">doSomethingWith</span><span class="p">(</span><span class="n">track</span><span class="p">)</span>
    <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
        <span class="n">parseError</span> <span class="o">=</span> <span class="n">error</span>
    <span class="p">}</span>
<span class="o">...</span>
<span class="kd">func</span> <span class="nf">doSomethingWith</span><span class="p">(</span><span class="n">_</span> <span class="nv">track</span><span class="p">:</span> <span class="kt">GPXTrack</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">formatter</span> <span class="o">=</span> <span class="kt">MeasurementFormatter</span><span class="p">()</span>
    <span class="n">formatter</span><span class="o">.</span><span class="n">unitStyle</span> <span class="o">=</span> <span class="o">.</span><span class="n">short</span>
    <span class="n">formatter</span><span class="o">.</span><span class="n">unitOptions</span> <span class="o">=</span> <span class="o">.</span><span class="n">naturalScale</span>
    <span class="n">formatter</span><span class="o">.</span><span class="n">numberFormatter</span><span class="o">.</span><span class="n">maximumFractionDigits</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">let</span> <span class="nv">trackGraph</span> <span class="o">=</span> <span class="n">track</span><span class="o">.</span><span class="n">graph</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"Track length: </span><span class="se">\(</span><span class="n">formatter</span><span class="o">.</span><span class="nf">string</span><span class="p">(</span><span class="nv">from</span><span class="p">:</span> <span class="kt">Measurement</span><span class="o">&lt;</span><span class="kt">UnitLength</span><span class="o">&gt;</span><span class="p">(</span><span class="nv">value</span><span class="p">:</span> <span class="n">trackGraph</span><span class="o">.</span><span class="n">distance</span><span class="p">,</span> <span class="nv">unit</span><span class="p">:</span> <span class="o">.</span><span class="n">meters</span><span class="p">))</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"Track elevation: </span><span class="se">\(</span><span class="n">formatter</span><span class="o">.</span><span class="nf">string</span><span class="p">(</span><span class="nv">from</span><span class="p">:</span> <span class="kt">Measurement</span><span class="o">&lt;</span><span class="kt">UnitLength</span><span class="o">&gt;</span><span class="p">(</span><span class="nv">value</span><span class="p">:</span> <span class="n">trackGraph</span><span class="o">.</span><span class="n">elevationGain</span><span class="p">,</span> <span class="nv">unit</span><span class="p">:</span> <span class="o">.</span><span class="n">meters</span><span class="p">))</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">point</span> <span class="k">in</span> <span class="n">track</span><span class="o">.</span><span class="n">trackPoints</span> <span class="p">{</span>
        <span class="nf">print</span><span class="p">(</span><span class="s">"Lat: </span><span class="se">\(</span><span class="n">point</span><span class="o">.</span><span class="n">coordinate</span><span class="o">.</span><span class="n">latitude</span><span class="se">)</span><span class="s">, lon: </span><span class="se">\(</span><span class="n">point</span><span class="o">.</span><span class="n">coordinate</span><span class="o">.</span><span class="n">longitude</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h3 id='exporting-a-track' class='heading'>Exporting a track</h3>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">GPXKit</span>
<span class="k">let</span> <span class="nv">track</span><span class="p">:</span> <span class="kt">GPXTrack</span> <span class="o">=</span> <span class="o">...</span>
<span class="k">let</span> <span class="nv">exporter</span> <span class="o">=</span> <span class="kt">GPXExporter</span><span class="p">(</span><span class="nv">track</span><span class="p">:</span> <span class="n">track</span><span class="p">,</span> <span class="nv">shouldExportDate</span><span class="p">:</span> <span class="kc">false</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">exporter</span><span class="o">.</span><span class="n">xmlString</span><span class="p">)</span>
</code></pre>
<h3 id='combine-integration' class='heading'>Combine integration</h3>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">Combine</span>
<span class="kd">import</span> <span class="kt">GPXKit</span>

<span class="k">let</span> <span class="nv">url</span> <span class="o">=</span> <span class="c1">/// url with gpx</span>
<span class="kt">GPXFileParser</span><span class="o">.</span><span class="nf">load</span><span class="p">(</span><span class="nv">from</span><span class="p">:</span> <span class="n">url</span><span class="p">)</span>
   <span class="o">.</span><span class="n">publisher</span>
   <span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="n">track</span> <span class="k">in</span>
      <span class="c1">// do something with parsed track </span>
   <span class="p">}</span>
</code></pre>

<p>See tests for more usage examples.</p>
<h3 id='climb-detection' class='heading'>Climb detection</h3>

<p>To detect climbs in a track, use the <code><a href="Structs/TrackGraph.html">TrackGraph</a></code>s <code>climb(epsilon:minimumGrade:maxJoinDistance:)</code> method which returns an array of <code><a href="Structs/Climb.html">Climb</a></code> values for given filter parameters.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">track</span><span class="p">:</span> <span class="kt">GPXTrack</span> <span class="o">=</span> <span class="o">...</span>
<span class="k">let</span> <span class="nv">climbs</span> <span class="o">=</span> <span class="n">track</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="nf">climbs</span><span class="p">(</span><span class="nv">epsilon</span><span class="p">:</span> <span class="mf">4.0</span><span class="p">,</span> <span class="nv">minimumGrade</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">,</span> <span class="nv">maxJoinDistance</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">)</span>
<span class="c1">// climbs is an array of `Climb` values, describing each climb (start, end, elevation, grade, FIETS score and so on...).</span>
</code></pre>
<h2 id='documentation' class='heading'>Documentation</h2>

<p>Project documentation is available at <a href="https://mmllr.github.io/GPXKit/">GitHub Pages</a></p>

<p>Run the following commands from the projects root to generate the documentation:</p>
<pre class="highlight plaintext"><code>[sudo] gem install jazzy
jazzy
</code></pre>

<p>Browse the documentation under the doc folder.</p>
<h2 id='contributing' class='heading'>Contributing</h2>

<p>Contributions to this project will be more than welcomed. Feel free to add a pull request or open an issue.
If you require a feature that has yet to be available, do open an issue, describing why and what the feature could bring and how it would help you!</p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2024 <a class="link" href="" target="_blank" rel="external noopener"></a>. All rights reserved. (Last updated: 2024-03-01)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external noopener">jazzy ♪♫ v0.14.4</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external noopener">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</html>
